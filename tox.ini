[tox]
envlist = py36
          docs
          man
          pipfile
skipsdist = true

[testenv]
basepython = python3.6
usedevelop = true
deps = pycodestyle
       pydocstyle
       pyflakes
       pylama
       pytest
       pytest-asyncio
       pytest-cov
       git+git://github.com/kura/pytest-pride.git#egg=pytest-pride
       radon
       setproctitle
       uvloop
commands = py.test --pylama --cache-clear --verbose blackhole tests
           radon mi -nc blackhole
[testenv:docs]
deps = sphinx
       guzzle_sphinx_theme
changedir = docs/source
commands = sphinx-build -d {envtmpdir}/doctrees . {envtmpdir}/html -c .

[testenv:man]
deps = docutils
commands = rst2man.py man/source/blackhole.rst {envtmpdir}/blackhole.1
           rst2man.py man/source/blackhole_config.rst {envtmpdir}/blackhole_config.1

[testenv:pipfile]
deps = pipenv
commands = pipenv check
           pipenv install
