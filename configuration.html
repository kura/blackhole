
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  
  <!-- Licensed under the Apache 2.0 License -->
  <link rel="stylesheet" type="text/css" href="_static/fonts/open-sans/stylesheet.css" />
  <!-- Licensed under the SIL Open Font License -->
  <link rel="stylesheet" type="text/css" href="_static/fonts/source-serif-pro/source-serif-pro.css" />
  <link rel="stylesheet" type="text/css" href="_static/css/bootstrap.min.css" />
  <link rel="stylesheet" type="text/css" href="_static/css/bootstrap-theme.min.css" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
    <title>Configuration &#8212; Blackhole 2.1.18 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/blackhole.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="search" type="application/opensearchdescription+xml"
          title="Search within Blackhole 2.1.18 documentation"
          href="_static/opensearch.xml"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Communicating with Blackhole" href="communicating-with-blackhole.html" />
    <link rel="prev" title="Changelog" href="changelog.html" />
  
   

  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="communicating-with-blackhole.html" title="Communicating with Blackhole"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="changelog.html" title="Changelog"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Blackhole 2.1.18 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Configuration</a></li> 
      </ul>
    </div>
    <div class="container-wrapper">

      <div id="mobile-toggle">
        <a href="#"><span class="glyphicon glyphicon-align-justify" aria-hidden="true"></span></a>
      </div>
  <div id="left-column">
    <div class="sphinxsidebar"><a href="
    index.html" class="text-logo">Blackhole</a>
<div class="sidebar-block">
  <div class="sidebar-wrapper">
    <h2>Table Of Contents</h2>
  </div>
  <div class="sidebar-toc">
    
    
      <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Configuration</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#command-line-options">Command line options</a></li>
<li class="toctree-l2"><a class="reference internal" href="#configuration-options">Configuration options</a></li>
<li class="toctree-l2"><a class="reference internal" href="#optional-features-you-should-probably-use">Optional features (you should probably use)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#installing-the-init-d-rc-d-scripts">Installing the init.d/rc.d scripts</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="communicating-with-blackhole.html">Communicating with Blackhole</a></li>
<li class="toctree-l1"><a class="reference internal" href="dynamic-responses.html">Dynamic responses</a></li>
<li class="toctree-l1"><a class="reference internal" href="dynamic-switches.html">Dynamic Switches</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API</a></li>
</ul>

    
  </div>
</div>
<div class="sidebar-block">
  <div class="sidebar-wrapper">
    <div id="main-search">
      <form class="form-inline" action="search.html" method="GET" role="form">
        <div class="input-group">
          <input name="q" type="text" class="form-control" placeholder="Search...">
        </div>
        <input type="hidden" name="check_keywords" value="yes" />
        <input type="hidden" name="area" value="default" />
      </form>
    </div>
  </div>
</div>
      
    </div>
  </div>
        <div id="right-column">
          
          <div role="navigation" aria-label="breadcrumbs navigation">
            <ol class="breadcrumb">
              <li><a href="index.html">Docs</a></li>
              
              <li>Configuration</li>
            </ol>
          </div>
          
          <div class="document clearer body">
            
  <section id="configuration">
<h1>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h1>
<section id="command-line-options">
<span id="id1"></span><h2>Command line options<a class="headerlink" href="#command-line-options" title="Permalink to this headline">¶</a></h2>
<p>Configuration options can be passed via the command line
as below:</p>
<dl class="option-list">
<dt><kbd><span class="option">-h</span></kbd></dt>
<dd><p>show this help message and exit</p>
</dd>
<dt><kbd><span class="option">-v</span></kbd></dt>
<dd><p>show program’s version number and exit</p>
</dd>
<dt><kbd><span class="option">-c <var>FILE</var></span></kbd></dt>
<dd><p>override the default configuration options</p>
</dd>
<dt><kbd><span class="option">-t</span></kbd></dt>
<dd><p>perform a configuration test and exit</p>
</dd>
<dt><kbd><span class="option">-d</span></kbd></dt>
<dd><p>enable debugging mode</p>
</dd>
<dt><kbd><span class="option">-b</span></kbd></dt>
<dd><p>run in the background</p>
</dd>
<dt><kbd><span class="option">-l<var>s</var></span></kbd></dt>
<dd><p>Disable <a class="reference external" href="https://docs.python.org/3.9/library/ssl.html#ssl.OP_SINGLE_DH_USE" title="(in Python v3.9)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ssl.OP_SINGLE_DH_USE</span></code></a> and
<a class="reference external" href="https://docs.python.org/3.9/library/ssl.html#ssl.OP_SINGLE_ECDH_USE" title="(in Python v3.9)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ssl.OP_SINGLE_ECDH_USE</span></code></a>.
Reduces CPU overhead at the expense of security. Don’t use this
option unless you really need to. – added in <a class="reference internal" href="changelog.html#id36"><span class="std std-ref">2.0.13</span></a></p>
</dd>
<dt><kbd><span class="option">-q</span></kbd></dt>
<dd><p>Suppress warnings when using -ls/–less-secure, running as root or
not using <a class="reference internal" href="#tls-dhparams"><span class="std std-ref">tls_dhparams</span></a> option.</p>
</dd>
</dl>
</section>
<section id="configuration-options">
<span id="id2"></span><h2>Configuration options<a class="headerlink" href="#configuration-options" title="Permalink to this headline">¶</a></h2>
<p>Here are all available options for the configuration file, their default values
and information on what the options actually do.</p>
<p>From <a class="reference internal" href="changelog.html#id18"><span class="std std-ref">2.1.8</span></a> onwards the <code class="docutils literal notranslate"><span class="pre">blackhole_config</span></code> command will also display
this information directly from the command line.</p>
<ul class="simple">
<li><p><a class="reference internal" href="#listen">listen</a></p></li>
<li><p><a class="reference internal" href="#tls-listen">tls_listen</a></p></li>
<li><p><a class="reference internal" href="#user">user</a></p></li>
<li><p><a class="reference internal" href="#group">group</a></p></li>
<li><p><a class="reference internal" href="#pidfile">pidfile</a></p></li>
<li><p><a class="reference internal" href="#timeout">timeout</a></p></li>
<li><p><a class="reference internal" href="#tls-cert">tls_cert</a></p></li>
<li><p><a class="reference internal" href="#tls-key">tls_key</a></p></li>
<li><p><a class="reference internal" href="#tls-dhparams">tls_dhparams</a></p></li>
<li><p><a class="reference internal" href="#delay">delay</a></p></li>
<li><p><a class="reference internal" href="#mode">mode</a></p></li>
<li><p><a class="reference internal" href="#max-message-size">max_message_size</a></p></li>
<li><p><a class="reference internal" href="#dynamic-switch">dynamic_switch</a></p></li>
<li><p><a class="reference internal" href="#workers">workers</a></p></li>
</ul>
<hr class="docutils" />
<section id="listen">
<span id="id3"></span><h3>listen<a class="headerlink" href="#listen" title="Permalink to this headline">¶</a></h3>
<dl class="field-list simple">
<dt class="field-odd">Syntax</dt>
<dd class="field-odd"><p><strong>listen</strong> = <em>[address]:port [mode=MODE] [delay=DELAY]</em></p>
</dd>
<dt class="field-even">Default</dt>
<dd class="field-even"><p>127.0.0.1:25, 127.0.0.1:587, :::25, :::587 – 25 is the recognised SMTP
port, 587 is the recognised SMTP Submission port. IPv6 listeners are only
enabled if IPv6 is supported.</p>
</dd>
<dt class="field-odd">Optional</dt>
<dd class="field-odd"><p><em>mode=</em> and <em>delay=</em> – allows setting a response mode and delay per
listener.</p>
</dd>
<dt class="field-even">Added</dt>
<dd class="field-even"><p><a class="reference internal" href="changelog.html#id46"><span class="std std-ref">2.0.8</span></a> – introduced the new IPv6 aware syntax
<a class="reference internal" href="changelog.html#id24"><span class="std std-ref">2.1.5</span></a> – added optional mode and delay flags</p>
</dd>
</dl>
<p><cite>:25</cite> is equivalent to listening on port 25 on all IPv4 addresses and <cite>:::25</cite>
is equivalent to listening on port 25 on all IPv6 addresses.</p>
<p>Multiple addresses and ports can be listed on a single line.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">listen</span> <span class="o">=</span> <span class="mf">10.0.0.1</span><span class="p">:</span><span class="mi">25</span><span class="p">,</span> <span class="mf">10.0.0.2</span><span class="p">:</span><span class="mi">25</span><span class="p">,</span> <span class="p">:</span><span class="mi">25</span><span class="p">,</span> <span class="p">:::</span><span class="mi">25</span><span class="p">,</span> <span class="p">:</span><span class="mi">587</span><span class="p">,</span> <span class="p">:::</span><span class="mi">587</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">mode=</span></code> and <code class="docutils literal notranslate"><span class="pre">delay=</span></code> flags allow specific ports to act in specific
ways. i.e. you could accept all mail on 10.0.0.1:25 and bounce it all on
10.0.0.2:25, as below.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">listen</span> <span class="o">=</span> <span class="mf">10.0.0.1</span><span class="p">:</span><span class="mi">25</span> <span class="n">mode</span><span class="o">=</span><span class="n">accept</span><span class="p">,</span> <span class="mf">10.0.0.2</span><span class="p">:</span><span class="mi">25</span> <span class="n">mode</span><span class="o">=</span><span class="n">bounce</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">mode=</span></code> and <code class="docutils literal notranslate"><span class="pre">delay=</span></code> flags may also be specified together, as required.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">listen</span> <span class="o">=</span> <span class="mf">10.0.0.1</span><span class="p">:</span><span class="mi">25</span> <span class="n">mode</span><span class="o">=</span><span class="n">accept</span> <span class="n">delay</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="mf">10.0.0.2</span><span class="p">:</span><span class="mi">25</span> <span class="n">mode</span><span class="o">=</span><span class="n">bounce</span> <span class="n">delay</span><span class="o">=</span><span class="mi">10</span>
</pre></div>
</div>
<p>The flags accept the same options as <a class="reference internal" href="dynamic-switches.html#dynamic-switches"><span class="std std-ref">Dynamic Switches</span></a>, including setting
a delay range.</p>
<hr class="docutils" />
</section>
<section id="tls-listen">
<span id="id4"></span><h3>tls_listen<a class="headerlink" href="#tls-listen" title="Permalink to this headline">¶</a></h3>
<dl class="field-list simple">
<dt class="field-odd">Syntax</dt>
<dd class="field-odd"><p><strong>tls_listen</strong> = <em>[address]:port [mode=MODE] [delay=DELAY]</em></p>
</dd>
<dt class="field-even">Default</dt>
<dd class="field-even"><p>None – 465 is the recognised SMTPS port <a class="footnote-reference brackets" href="#id6" id="id5">*</a>.</p>
</dd>
<dt class="field-odd">Optional</dt>
<dd class="field-odd"><p><em>mode=</em> and <em>delay=</em> – allows setting a response mode and delay per
listener.</p>
</dd>
<dt class="field-even">Added</dt>
<dd class="field-even"><p><a class="reference internal" href="changelog.html#id46"><span class="std std-ref">2.0.8</span></a> – introduced the new IPv6 aware syntax
<a class="reference internal" href="changelog.html#id24"><span class="std std-ref">2.1.5</span></a> – added optional mode and delay flags</p>
</dd>
</dl>
<p><cite>:465</cite> is equivalent to listening on port 465 on all IPv4 addresses and
<cite>:::465</cite> is equivalent to listening on port 465 on all IPv6 addresses.</p>
<p>Multiple addresses and ports can be listed on a single line.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tls_listen</span> <span class="o">=</span> <span class="mf">10.0.0.1</span><span class="p">:</span><span class="mi">465</span><span class="p">,</span> <span class="mf">10.0.0.2</span><span class="p">:</span><span class="mi">465</span><span class="p">,</span> <span class="p">:</span><span class="mi">465</span><span class="p">,</span> <span class="p">:::</span><span class="mi">465</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">mode=</span></code> and <code class="docutils literal notranslate"><span class="pre">delay=</span></code> flags allow specific ports to act in specific
ways. i.e. you could accept all mail on 10.0.0.1:465 and bounce it all on
10.0.0.2:465, as below.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tls_listen</span> <span class="o">=</span> <span class="mf">10.0.0.1</span><span class="p">:</span><span class="mi">465</span> <span class="n">mode</span><span class="o">=</span><span class="n">accept</span><span class="p">,</span> <span class="mf">10.0.0.2</span><span class="p">:</span><span class="mi">465</span> <span class="n">mode</span><span class="o">=</span><span class="n">bounce</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">mode=</span></code> and <code class="docutils literal notranslate"><span class="pre">delay=</span></code> flags may also be specified together, as required.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tls_listen</span> <span class="o">=</span> <span class="mf">10.0.0.1</span><span class="p">:</span><span class="mi">465</span> <span class="n">mode</span><span class="o">=</span><span class="n">accept</span> <span class="n">delay</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="mf">10.0.0.2</span><span class="p">:</span><span class="mi">465</span> <span class="n">mode</span><span class="o">=</span><span class="n">bounce</span> <span class="n">delay</span><span class="o">=</span><span class="mi">10</span>
</pre></div>
</div>
<p>The flags accept the same options as <a class="reference internal" href="dynamic-switches.html#dynamic-switches"><span class="std std-ref">Dynamic Switches</span></a>, including setting
a delay range.</p>
<dl class="footnote brackets">
<dt class="label" id="id6"><span class="brackets"><a class="fn-backref" href="#id5">*</a></span></dt>
<dd><p>Port 465 – while originally a recognised port for SMTP over
SSL/TLS – is no longer advised for use. It’s listed here because it’s a
well known and well used port, but also because Blackhole currently does not
support <code class="docutils literal notranslate"><span class="pre">STARTTLS</span></code> over SMTP or SMTP Submission. –
<a class="reference external" href="https://www.iana.org/assignments/service-names-port-numbers/service-names-port-numbers.txt">https://www.iana.org/assignments/service-names-port-numbers/service-names-port-numbers.txt</a></p>
</dd>
</dl>
<hr class="docutils" />
</section>
<section id="user">
<span id="id7"></span><h3>user<a class="headerlink" href="#user" title="Permalink to this headline">¶</a></h3>
<dl class="field-list simple">
<dt class="field-odd">Syntax</dt>
<dd class="field-odd"><p><strong>user</strong> = <em>user</em></p>
</dd>
<dt class="field-even">Default</dt>
<dd class="field-even"><p>The current Linux user</p>
</dd>
</dl>
<p>Blackhole will set it’s process owner to the value provided with this options.
Ports below 1024 require sudo or root privileges, this option is available so
that the process can be started, listen on privileged ports and then give up
those privileges.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">user</span> <span class="o">=</span> <span class="n">blackhole</span>
</pre></div>
</div>
<hr class="docutils" />
</section>
<section id="group">
<span id="id8"></span><h3>group<a class="headerlink" href="#group" title="Permalink to this headline">¶</a></h3>
<dl class="field-list simple">
<dt class="field-odd">Syntax</dt>
<dd class="field-odd"><p><strong>group</strong> = <em>group</em></p>
</dd>
<dt class="field-even">Default</dt>
<dd class="field-even"><p>The primary group of the current Linux user</p>
</dd>
</dl>
<p>Blackhole will set it’s process group to the value provided with this options.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">group</span> <span class="o">=</span> <span class="n">blackhole</span>
</pre></div>
</div>
<hr class="docutils" />
</section>
<section id="pidfile">
<span id="id9"></span><h3>pidfile<a class="headerlink" href="#pidfile" title="Permalink to this headline">¶</a></h3>
<dl class="field-list simple">
<dt class="field-odd">Syntax</dt>
<dd class="field-odd"><p><strong>pidfile</strong> = <em>/path/to/file.pid</em></p>
</dd>
<dt class="field-even">Default</dt>
<dd class="field-even"><p>/tmp/blackhole.pid</p>
</dd>
<dt class="field-odd">Added</dt>
<dd class="field-odd"><p><a class="reference internal" href="changelog.html#id54"><span class="std std-ref">2.0.4</span></a></p>
</dd>
</dl>
<p>Blackhole will write it’s Process ID to this file, allowing you to easily track
the process and send signals to it.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pidfile</span> <span class="o">=</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">run</span><span class="o">/</span><span class="n">blackhole</span><span class="o">.</span><span class="n">pid</span>
</pre></div>
</div>
<hr class="docutils" />
</section>
<section id="timeout">
<span id="id10"></span><h3>timeout<a class="headerlink" href="#timeout" title="Permalink to this headline">¶</a></h3>
<dl class="field-list simple">
<dt class="field-odd">Syntax</dt>
<dd class="field-odd"><p><strong>timeout</strong> = <em>seconds</em></p>
</dd>
<dt class="field-even">Default</dt>
<dd class="field-even"><p>60 – Maximum value of 180 seconds.</p>
</dd>
</dl>
<p>This is the amount of time to wait for a client to send data. Once the timeout
value has been reached with no data being sent by the client, the connection
will be terminated and a <code class="docutils literal notranslate"><span class="pre">421</span> <span class="pre">Timeout</span></code> message will be sent to the client.</p>
<p>Helps mitigate DoS risks.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">timeout</span> <span class="o">=</span> <span class="mi">30</span>
</pre></div>
</div>
<hr class="docutils" />
</section>
<section id="tls-cert">
<span id="id11"></span><h3>tls_cert<a class="headerlink" href="#tls-cert" title="Permalink to this headline">¶</a></h3>
<dl class="field-list simple">
<dt class="field-odd">Syntax</dt>
<dd class="field-odd"><p><strong>tls_cert</strong> = <em>/path/to/certificate.pem</em></p>
</dd>
<dt class="field-even">Default</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
<p>The certificate file in x509 format for wrapping a connection in SSL/TLS.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tls_cert</span> <span class="o">=</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">ssl</span><span class="o">/</span><span class="n">certs</span><span class="o">/</span><span class="n">blackhole</span><span class="o">.</span><span class="n">crt</span>
</pre></div>
</div>
<hr class="docutils" />
</section>
<section id="tls-key">
<span id="id12"></span><h3>tls_key<a class="headerlink" href="#tls-key" title="Permalink to this headline">¶</a></h3>
<dl class="field-list simple">
<dt class="field-odd">Syntax</dt>
<dd class="field-odd"><p><strong>tls_key</strong> = <em>/path/to/private.key</em></p>
</dd>
<dt class="field-even">Default</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
<p>The private key of the <a class="reference internal" href="#tls-cert">tls_cert</a>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tls_key</span> <span class="o">=</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">ssl</span><span class="o">/</span><span class="n">private</span><span class="o">/</span><span class="n">blackhole</span><span class="o">.</span><span class="n">key</span>
</pre></div>
</div>
<hr class="docutils" />
</section>
<section id="tls-dhparams">
<span id="id13"></span><h3>tls_dhparams<a class="headerlink" href="#tls-dhparams" title="Permalink to this headline">¶</a></h3>
<dl class="field-list simple">
<dt class="field-odd">Syntax</dt>
<dd class="field-odd"><p><strong>tls_dhparams</strong> = <em>/path/to/dhparams.pem</em></p>
</dd>
<dt class="field-even">Default</dt>
<dd class="field-even"><p>None</p>
</dd>
<dt class="field-odd">Added</dt>
<dd class="field-odd"><p><a class="reference internal" href="changelog.html#id54"><span class="std std-ref">2.0.4</span></a></p>
</dd>
</dl>
<p>File containing Diffie Hellman ephemeral parameters for ECDH ciphers.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tls_dhparams</span> <span class="o">=</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">ssl</span><span class="o">/</span><span class="n">dhparams</span><span class="o">.</span><span class="n">pem</span>
</pre></div>
</div>
<hr class="docutils" />
</section>
<section id="delay">
<span id="id14"></span><h3>delay<a class="headerlink" href="#delay" title="Permalink to this headline">¶</a></h3>
<dl class="field-list simple">
<dt class="field-odd">Syntax</dt>
<dd class="field-odd"><p><strong>delay</strong> = <em>seconds</em></p>
</dd>
<dt class="field-even">Default</dt>
<dd class="field-even"><p>None – Maximum value of 60 seconds.</p>
</dd>
</dl>
<p>Time to delay before returning a response to a completed DATA command. You can
use this to delay testing or simulate lag.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">delay</span> <span class="o">=</span> <span class="mi">30</span>
</pre></div>
</div>
<hr class="docutils" />
</section>
<section id="mode">
<span id="id15"></span><h3>mode<a class="headerlink" href="#mode" title="Permalink to this headline">¶</a></h3>
<dl class="field-list simple">
<dt class="field-odd">Syntax</dt>
<dd class="field-odd"><p><strong>mode</strong> = <em>accept | bounce | random</em></p>
</dd>
<dt class="field-even">Default</dt>
<dd class="field-even"><p>accept – valid options are:- accept, bounce, random.</p>
</dd>
</dl>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mode</span> <span class="o">=</span> <span class="n">random</span>
</pre></div>
</div>
<hr class="docutils" />
</section>
<section id="max-message-size">
<span id="id16"></span><h3>max_message_size<a class="headerlink" href="#max-message-size" title="Permalink to this headline">¶</a></h3>
<dl class="field-list simple">
<dt class="field-odd">Syntax</dt>
<dd class="field-odd"><p><strong>max_message_size</strong> = <em>bytes</em></p>
</dd>
<dt class="field-even">Default</dt>
<dd class="field-even"><p>512000 Bytes (512 KB)</p>
</dd>
<dt class="field-odd">Added</dt>
<dd class="field-odd"><p><a class="reference internal" href="changelog.html#id54"><span class="std std-ref">2.0.4</span></a></p>
</dd>
</dl>
<p>The maximum message size for a message. This includes headers and helps
mitigate a DoS risk.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">max_message_size</span> <span class="o">=</span> <span class="mi">1024000</span>
</pre></div>
</div>
<hr class="docutils" />
</section>
<section id="dynamic-switch">
<span id="id17"></span><h3>dynamic_switch<a class="headerlink" href="#dynamic-switch" title="Permalink to this headline">¶</a></h3>
<dl class="field-list simple">
<dt class="field-odd">Syntax</dt>
<dd class="field-odd"><p><strong>dynamic_switch</strong> = <em>true | false</em></p>
</dd>
<dt class="field-even">Default</dt>
<dd class="field-even"><p>true – valid options are:- true, false.</p>
</dd>
<dt class="field-odd">Added</dt>
<dd class="field-odd"><p><a class="reference internal" href="changelog.html#id50"><span class="std std-ref">2.0.6</span></a></p>
</dd>
</dl>
<p>The dynamic switch option allows you to enable or disable parsing of dynamic
switches from email headers – <a class="reference internal" href="dynamic-switches.html#dynamic-switches"><span class="std std-ref">Dynamic Switches</span></a></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dynamic_switch</span> <span class="o">=</span> <span class="n">false</span>
</pre></div>
</div>
<hr class="docutils" />
</section>
<section id="workers">
<span id="id18"></span><h3>workers<a class="headerlink" href="#workers" title="Permalink to this headline">¶</a></h3>
<dl class="field-list simple">
<dt class="field-odd">Syntax</dt>
<dd class="field-odd"><p><strong>workers</strong> = <em>number</em></p>
</dd>
<dt class="field-even">Default</dt>
<dd class="field-even"><p>1</p>
</dd>
<dt class="field-odd">Added</dt>
<dd class="field-odd"><p><a class="reference internal" href="changelog.html#id32"><span class="std std-ref">2.1.1</span></a></p>
</dd>
</dl>
<p>The workers option allows you to define how many worker processes to spawn to
handle incoming mail. The absolute minimum is actually 2. Even by setting the
<code class="docutils literal notranslate"><span class="pre">workers</span></code> value to 1, a supervisor process will always exist meaning that you
would have 1 worker and a supervisor.</p>
</section>
<hr class="docutils" />
<section id="starttls">
<h3>STARTTLS<a class="headerlink" href="#starttls" title="Permalink to this headline">¶</a></h3>
<p>Currently <cite>asyncio</cite> does not have the code in place to make STARTTLS
possible, the STARTTLS verb returns a <code class="docutils literal notranslate"><span class="pre">500</span> <span class="pre">Not</span> <span class="pre">implemented</span></code> response
until it’s possible to implement. –<a class="reference external" href="https://bugs.python.org/review/23749/">https://bugs.python.org/review/23749/</a></p>
</section>
</section>
<section id="optional-features-you-should-probably-use">
<h2>Optional features (you should probably use)<a class="headerlink" href="#optional-features-you-should-probably-use" title="Permalink to this headline">¶</a></h2>
<p>Blackhole has builtin support for the following features. While these are not
required for the service to run, they do improve it the server in various ways.</p>
<section id="uvloop">
<h3>uvloop<a class="headerlink" href="#uvloop" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>uvloop is a fast, drop-in replacement of the built-in asyncio event loop.
uvloop is implemented in Cython and uses libuv under the hood.</p>
</div></blockquote>
<p>Using <a class="reference external" href="https://github.com/MagicStack/uvloop">uvloop</a> with Blackhole is as
simple as installing <a class="reference external" href="https://github.com/libuv/libuv">libuv</a> and the
Blackhole extra package.</p>
<p>On Debian/Ubuntu it’s as simple as installing via APT and Pip respectively.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>apt-get install libuv1 libuv1-dev python-dev
pip install blackhole<span class="o">[</span>uvloop<span class="o">]</span>
</pre></div>
</div>
</section>
<section id="setproctitle">
<h3>setproctitle<a class="headerlink" href="#setproctitle" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="https://pypi.python.org/pypi/setproctitle">setproctitle</a> is a simple library
that allows Blackhole to set a more <cite>ps aux</cite>-friendly output for the blackhole
processes.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># without setproctitle</span>
python3 /home/kura/.virtualenvs/blackhole/bin/blackhole -c test.conf -d
python3 /home/kura/.virtualenvs/blackhole/bin/blackhole -c test.conf -d
<span class="c1"># with setproctitle</span>
blackhole: master
blackhole: worker
</pre></div>
</div>
<p>You can install setproctitle with the Blackhole extra package.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip install blackhole<span class="o">[</span>setproctitle<span class="o">]</span>
</pre></div>
</div>
</section>
</section>
<section id="installing-the-init-d-rc-d-scripts">
<h2>Installing the init.d/rc.d scripts<a class="headerlink" href="#installing-the-init-d-rc-d-scripts" title="Permalink to this headline">¶</a></h2>
<p>The init script depends on <em>/etc/blackhole.conf</em> being in place and configured.</p>
<p>Blackhole comes with a script that works with init.d/rc.d, to install it copy
it from the <em>init.d/YOUR_DISTRO</em> folder in the root directory of this project
to <em>/etc/init.d/</em>.</p>
<p>The init scripts can be found <a class="reference external" href="https://github.com/kura/blackhole/tree/master/init.d">here</a>.</p>
<p>i.e. for Debian/Ubuntu users, mv the file from <em>init.d/debian-ubuntu/</em> to
<em>/etc/init.d/</em>.</p>
<p>Then make sure it’s executable</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>chmod +x /etc/init.d/blackhole
</pre></div>
</div>
<p>To make blackhole start on a reboot use the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">update</span><span class="o">-</span><span class="n">rc</span><span class="o">.</span><span class="n">d</span> <span class="n">blackhole</span> <span class="n">defaults</span>
</pre></div>
</div>
</section>
</section>


          </div>
            
  <div class="footer-relations">
    
      <div class="pull-left">
        <a class="btn btn-default" href="changelog.html" title="previous chapter (use the left arrow)">Changelog</a>
      </div>
    
      <div class="pull-right">
        <a class="btn btn-default" href="communicating-with-blackhole.html" title="next chapter (use the right arrow)">Communicating with Blackhole</a>
      </div>
    </div>
    <div class="clearer"></div>
  
        </div>
        <div class="clearfix"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="communicating-with-blackhole.html" title="Communicating with Blackhole"
             >next</a> |</li>
        <li class="right" >
          <a href="changelog.html" title="Changelog"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Blackhole 2.1.18 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Configuration</a></li> 
      </ul>
    </div>
<script type="text/javascript">
  $("#mobile-toggle a").click(function () {
    $("#left-column").toggle();
  });
</script>
<script type="text/javascript" src="_static/js/bootstrap.js"></script>
  <div class="footer">
    &copy; Copyright 2013-2021, Kura. Created using <a href="http://sphinx.pocoo.org/">Sphinx</a>.
  </div>
  </body>
</html>